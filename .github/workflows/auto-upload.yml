name: Auto Update and Push

on:
  push:
    paths:
      - "uploads/**"   # Trigger เมื่อมีการเปลี่ยนแปลงในโฟลเดอร์ uploads

jobs:
  auto-update:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout Repository
      uses: actions/checkout@v3

    - name: Set Up Git
      run: |
        git config --global user.name "P&T Auto Bot"
        git config --global user.email "your-email@example.com"

    - name: Commit and Push Changes
      env:
        TOKEN: ${{ secrets.PAT_TOKEN }}
      run: |
        git remote set-url origin https://x-access-token:${TOKEN}@github.com/username/P&T-Studio.git
        git add uploads/
        git commit -m "Auto-update: Added new files in uploads" || echo "No changes to commit"
        git push origin main
